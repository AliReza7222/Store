{% extends '_base.html' %}
{% load crispy_forms_tags %}

{% block title %} {{ book.title }} {% endblock title %}

{% block content %}
    <div class="book-detail" style="text-align:center">
        <h2><a href="">{{ book.title }}</a></h2>
        <img src="{{ book.cover.url }}" class="bookcover" alt="{{ book.title }}" style="width:300px;height:400px">
        <br>
        <p><strong>Author:</strong> {{ book.author }}</p>
        <p><strong>Price:</strong> {{ book.price }}$</p>
        <p><strong>publication_date:</strong> {{ book.publication_date }}</p>
        <p><strong>about_book:</strong>{{ book.about_book }}</p>
        {% if book.user == user %}
            <a href="{% url 'update_book' book.id %}">Update Book</a>
            <br>
            <a href="{% url 'delete_book' book.id %}" style="color:red">Delete Book</a>
        {% endif %}
        {% if user in book.favourites.all %}
            <br><br>
            <a href="{% url 'favourite_book' book.pk %}"
               class="btn btn-danger">Remove of Favourite</a>
        {% else %}
            <br><br>
            <a href="{% url 'favourite_book' book.pk %}" class="btn btn-outline-primary">Add To Favourite</a>
        {% endif %}
    </div><hr><br>

    <div>
        <h3>Reviews</h3>
        {% if book.reviews.all %}
            <ul>
            {% for review in book.reviews.all %}
                <li><strong>{{ review.author }} :</strong> {{ review.review }}</li>
            {% endfor %}
            </ul>
        {% else %}
            <p>No review has been registered yet.</p>
        {% endif %}
    </div>

    <br><hr>

    <div>
        <h3>Create Review For <a href="">{{ book.title }}</a></h3>
        <form method="post">
            {% csrf_token %}
            {{ form.review|as_crispy_field }}
            <button type="submit" class="btn btn-primary">Create</button>
        </form>
    </div>
    <br>
{% endblock content %}